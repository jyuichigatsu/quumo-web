# データ入力画面 UX設計 v0.1

---

## 🎯 目的

POSやセンサーが導入されていないクライアントでも、手入力で通行量・来店数・購買数等を記録し、ファネル分析に利用できるようにする。

---

## 🧩 入力モード構成

| モード | 対象ユーザー | 粒度 | 入力例 |
|:---|:---|:---|:---|
| 標準モード | 小規模店舗、通常利用者 | 日単位 | 2025-04-28の来店数 = 320 |
| 詳細モード | 高精度な時間帯分析が必要な利用者 | 時間単位（hour） | 2025-04-28 10時の通行量 = 110 |

---

## 📋 入力項目

| 項目 | 必須 | 型 | 補足 |
|:---|:---|:---|:---|
| 日付 | ✅ | `DATE` | date picker選択 |
| 時間（詳細モード） | ✅ | `INTEGER` (0–23) | 詳細モードでのみ表示 |
| 店舗 | ✅ | `STRING` | 所属店舗から選択 |
| 通行量 | ✅ | `INTEGER` | 0も許容 |
| 入店数 | ✅ | `INTEGER` | |
| 滞在者数 | ✅ | `INTEGER` | |
| 購買数 | ✅ | `INTEGER` | |
| 備考 | ❌ | `STRING` | 任意メモ欄 |

---

## 🧭 UIフロー

### 【標準モード】
1. ユーザーが「日付」「店舗」を選択
2. 数値4項目（通行・入店・滞在・購買）を入力
3. 保存ボタン押下 → バリデーション → DB保存

### 【詳細モード】
1. 日付＋24時間の行入力テーブルが表示
2. 各時間帯ごとに通行量・来店数等を入力
3. 一括保存ボタンでまとめて送信

---

## 💾 保存テーブル仕様：`manual_entry_table`

| カラム名 | 型 | 補足 |
|:---|:---|:---|
| client_id | STRING | 自動付与 |
| user_id | STRING | Firebase Authから取得 |
| store_id | STRING | 選択された店舗ID |
| date | DATE | 入力日付 |
| hour | INTEGER (nullable) | 時間単位モードで使用（0–23） |
| traffic | INTEGER | 通行量 |
| entries | INTEGER | 来店数 |
| stays | INTEGER | 滞在数 |
| purchases | INTEGER | 購買数 |
| notes | STRING | 任意備考欄 |
| created_at | TIMESTAMP | 自動生成 |
| updated_at | TIMESTAMP | 更新時刻 |

---

## 🔗 ダッシュボード連携方針
- `dashboard_hourly_summary` に UNION 対象として `manual_entry_table` をJOINして可視化
- `source = 'manual'` を付けてデータ由来を明示

---

## ✍️ 変更履歴

| 日付 | 内容 | 編集者 |
|:---|:---|:---|
| 2025-04-29 | 初版作成 | [あなたの名前] |

